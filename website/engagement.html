
<style>
    .table-wrapper {
            background: #fff;
            padding: 20px 25px;
            margin: 30px 0;
            border-radius: 3px;
            box-shadow: 0 1px 1px rgba(0,0,0,.05);
        }
        .table-title {        
            padding-bottom: 15px;
            background: #435d7d;
            color: #fff;
            padding: 16px 30px;
            margin: -20px -25px 10px;
            border-radius: 3px 3px 0 0;
        }
        .table-title h2 {
            margin: 5px 0 0;
            font-size: 24px;
        }
        .table-title .btn-group {
            float: right;
        }
        .table-title .btn {
            color: #fff;
            float: right;
            font-size: 13px;
            border: none;
            min-width: 50px;
            border-radius: 2px;
            border: none;
            outline: none !important;
            margin-left: 10px;
        }
        .table-title .btn i {
            float: left;
            font-size: 21px;
            margin-right: 5px;
        }
        .table-title .btn span {
            float: left;
            margin-top: 2px;
        }
        table.table tr th, table.table tr td {
            border-color: #e9e9e9;
            padding: 12px 15px;
            vertical-align: middle;
        }
        table.table tr th:first-child {
            width: 60px;
        }
        table.table tr th:last-child {
            width: 100px;
        }
        table.table-striped tbody tr:nth-of-type(odd) {
            background-color: #fcfcfc;
        }
        table.table-striped.table-hover tbody tr:hover {
            background: #f5f5f5;
        }
        table.table th i {
            font-size: 13px;
            margin: 0 5px;
            cursor: pointer;
        }	
        table.table td:last-child i {
            opacity: 0.9;
            font-size: 22px;
            margin: 0 5px;
        }
        table.table td a {
            font-weight: bold;
            color: #566787;
            display: inline-block;
            text-decoration: none;
            outline: none !important;
        }
        table.table td a:hover {
            color: #2196F3;
        }
        table.table td a.edit {
            color: #FFC107;
        }
        table.table td a.delete {
            color: #F44336;
        }
        table.table td i {
            font-size: 19px;
        }
        table.table .avatar {
            border-radius: 50%;
            vertical-align: middle;
            margin-right: 10px;
        }


        [type="file"] {
  height: 0;
  overflow: hidden;
  width: 0;
}

[type="file"] + label {
  background: #f15d22;
  border: none;
  border-radius: 5px;
  color: #fff;
  cursor: pointer;
  display: inline-block;
	font-family: 'Rubik', sans-serif;
	font-size: inherit;
  font-weight: 500;
  margin-bottom: 1rem;
  outline: none;
  padding: 1rem 50px;
  position: relative;
  transition: all 0.3s;
  vertical-align: middle;
  
  &:hover {
    background-color: darken(#f15d22, 10%);
  }
  
  &.btn-1 {
    background-color: #f79159;
    box-shadow: 0 6px darken(#f79159, 10%);
    transition: none;

    &:hover {
      box-shadow: 0 4px darken(#f79159, 10%);
      top: 2px;
    }
  }
  
  &.btn-2 {
    background-color: #99c793;
    border-radius: 50px;
    overflow: hidden;
    
    &::before {
      color: #fff;
      content: "\f382";
      font-family: "Font Awesome 5 Pro";
      font-size: 100%;
      height: 100%;
      right: 130%;
      line-height: 3.3;
      position: absolute;
      top: 0px;
      transition: all 0.3s;
    }

    &:hover {
      background-color: darken(#99c793, 30%);
        
      &::before {
        right: 75%;
      }
    }
  }
  
  &.btn-3 {
    background-color: #ee6d9e;
    border-radius: 0;
    overflow: hidden;
    
    span {
      display: inline-block;
      height: 100%;
      transition: all 0.3s;
      width: 100%;
    }
    
    &::before {
      color: #fff;
      content: "\f382";
      font-family: "Font Awesome 5 Pro";
      font-size: 130%;
      height: 100%;
      left: 0;
      line-height: 2.6;
      position: absolute;
      top: -180%;
      transition: all 0.3s;
      width: 100%;
    }

    &:hover {
      background-color: darken(#ee6d9e, 30%);
      
      span {
        transform: translateY(300%);
      }
        
      &::before {
        top: 0;
      }
    }
  }
}




.btn:active {
    box-shadow: 0 1px #666 !important;
    transform: translateY(2px) !important;
}

.btn-sık {
    transition: all 0.2s ease;
    background-color: white ;
    border: 2px solid #f44336 !important;
    box-shadow: 0 3px #d32f2f !important;
    min-width: 150px;
    border-radius: 20px;
}


    btn-sık::selection{
        background: green;
    }

input[type="radio"] {
     position: absolute;
  visibility: hidden;
}
input[type="radio"] + div {
    position: relative;
}
input[type="radio"]:checked + div {
  background-color: #ef5350;
}
input[type="radio"]:checked + div>span {
  color: white;
}
input[type="radio"] + div>span {
position: relative;
top: 25%;}

input[type="checkbox"] {
     position: absolute;
  visibility: hidden;
}

input[type="checkbox"] + div {
    position: relative;
}
input[type="checkbox"]:checked + div {
  background-color: #ef5350;
}
input[type="checkbox"]:checked + div>span {
  color: white;
}
input[type="checkbox"] + div>span {
position: relative;
top: 25%;}

input[type="checkbox"]:checked + div::before {
        content:"✔";
    position: absolute;
    bottom: 18px;
    right: 0px;
    font-size: 29px;
    color: #ef5350;
}

input[type="radio"]:checked + div::before {
    font-family: FontAwesome;
    content: "\f08d";
    position: absolute;
    bottom: 31px;
    font-size: 21px;
    color: white;
    right: -5px;
    -webkit-transform: rotate(30deg);
    -moz-transform: rotate(30deg);
    -o-transform: rotate(30deg);
    -ms-transform: rotate(30deg);
    transform: rotate(30deg);
    animation: fall 0.5s forwards;
}

@keyframes fall {
    100% {
        -webkit-transform: translate(-5px,5px) rotate(30deg);
        -moz-transform: translate(-5px,5px) rotate(30deg);
        -o-transform: translate(-5px,5px) rotate(30deg);
        -ms-transform: translate(-5px,5px) rotate(30deg);
        transform: translate(-5px,5px) rotate(30deg);
    }
}

@-moz-keyframes fall {
    100% {
        -webkit-transform: translate(-5px,5px) rotate(30deg);
        -moz-transform: translate(-5px,5px) rotate(30deg);
        -o-transform: translate(-5px,5px) rotate(30deg);
        -ms-transform: translate(-5px,5px) rotate(30deg);
        transform: translate(-5px,5px) rotate(30deg);
    }
}

@-webkit-keyframes fall {
     100% {
        -webkit-transform: translate(-5px,5px) rotate(30deg);
        -moz-transform: translate(-5px,5px) rotate(30deg);
        -o-transform: translate(-5px,5px) rotate(30deg);
        -ms-transform: translate(-5px,5px) rotate(30deg);
        transform: translate(-5px,5px) rotate(30deg);
    }
}




    </style>
<link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css"> 

    {%extends 'master.html'%}

    {%block content%}
   
    <div class="card">
        <div class="card-body">
          <h5 class="card-title">Gestion des Engagements</h5>

          <!-- Bordered Tabs Justified -->
          <ul class="nav nav-tabs nav-tabs-bordered d-flex" id="borderedTabJustified" role="tablist" style="font-weight: bold;font-family: forte;">
            <li class="nav-item flex-fill" role="presentation">
              <button class="nav-link w-100 active" id="home-tab" data-bs-toggle="tab" data-bs-target="#bordered-justified-home" type="button" role="tab" aria-controls="home" aria-selected="false" tabindex="-1">Bon De Commande</button>
            </li>
            <li class="nav-item flex-fill" role="presentation">
              <button class="nav-link w-100 " id="profile-tab" data-bs-toggle="tab" data-bs-target="#bordered-justified-profile" type="button" role="tab" aria-controls="profile" aria-selected="true">Lettre Commande</button>
            </li>
            <li class="nav-item flex-fill" role="presentation">
              <button class="nav-link w-100" id="contact-tab" data-bs-toggle="tab" data-bs-target="#bordered-justified-contact" type="button" role="tab" aria-controls="contact" aria-selected="false" tabindex="-1">Ordonancements</button>
            </li>
            <li class="nav-item flex-fill" role="presentation">
                <button class="nav-link w-100" id="decision-tab" data-bs-toggle="tab" data-bs-target="#bordered-justified-decision" type="button" role="tab" aria-controls="decision" aria-selected="false" tabindex="-1">Decision</button>
            </li>
              <li class="nav-item flex-fill" role="presentation">
                <button class="nav-link w-100" id="ordre-tab" data-bs-toggle="tab" data-bs-target="#bordered-justified-ordre" type="button" role="tab" aria-controls="ordre" aria-selected="false" tabindex="-1">Ordre De Mission</button>
              </li>
              <li class="nav-item flex-fill" role="presentation">
                <button class="nav-link w-100" id="marche-tab" data-bs-toggle="tab" data-bs-target="#bordered-justified-marche" type="button" role="tab" aria-controls="marche" aria-selected="false" tabindex="-1">Marche</button>
              </li> 
          </ul>
          <div class="tab-content pt-2" id="borderedTabJustifiedContent">
            <!-- Gestion des BonCommandes Commandes -->  <!-- Gestion des BonCommandes Commandes -->  <!-- Gestion des BonCommandes Commandes -->
               <!-- Gestion des BonCommandes Commandes -->  <!-- Gestion des BonCommandes Commandes -->  <!-- Gestion des BonCommandes Commandes -->
                  <!-- Gestion des BonCommandes Commandes -->  <!-- Gestion des BonCommandes Commandes -->  <!-- Gestion des BonCommandes Commandes -->
          <div class="tab-pane fade active show" id="bordered-justified-home" role="tabpanel" aria-labelledby="home-tab">
            
          <div class="col-md-12">
            <div class="card">
                <div class="card-body">
                  <h5 class="card-title" style="font-weight: bold;font-family: forte;">GESTION DES BONS DE COMMANDE</h5>
    
                  <nav>
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
                      
                      <li class="breadcrumb-item active">Bon De Commande</li>
                    </ol>
                  </nav>
                </div>
              </div>

            </div>
     
          <div class="card">
          <div class="card-body">
          <div class="container">
            <div class="table-wrapper">
              <div class="table-title">
                <div class="row">
                  <div class="col-sm-6">
                  <h5 style="font-weight: bold;" style="font-family:forte">LISTE DES BONS DE COMMANDE</h5>
                  </div>
                  <div class="col-sm-6">
                    <a  class="btn btn-success"  data-bs-toggle="modal" data-bs-target="#largeModal"><i class="bi bi-plus-circle-dotted"></i> <span>Ajouter</span></a>
                    <a href="" class="btn btn-danger"><i class="bi bi-dash-circle-dotted"></i> <span>supprimer</span></a>
                  </div>
                </div>
              </div>
              <table class="datatable table table-hover table-responsive text-center " >
                <thead>
                  <tr>
                    <th style="width: 25%;">
                        code
                
                    </th>
     
      
          <!-- <th>Operations</th>
      
          <th>Sous-Programmes</th>
          <th>Activites</th> -->
          <th>Tva </th>
          <th>Ir</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>

        {%for bon in boncommande%}
        <tr>
         
          <td style="font-weight: bold;">
            
            <a href="/add_references/{{bon.id}}/"> <i class="bi bi-journal-text"></i>   {{bon.code}}      </a>
          </td>
          <!-- <td>{{bon.idoperation}}</td>
         
          <td>{{bon.idsousprogramme}}</td>
          <td>{{bon.idactivite}}</td> -->
          <td>{{bon.idtva.nom}}</td>
          <td>{{bon.idir.nom}}</td>
          <td>
            <label>
              {%if bon.status == 1%}
              <input type="checkbox" name="checkboxYannis" checked/>  
              <div class="btn btn-sık"><span>Valide</span></div>
              {%elif bon.status == 0%}  
              <input type="checkbox" name="checkboxYannis"/>  
                <div class="btn btn-sık"><span>Non Valide</span></div>
                {%endif%}
          </label>
          </td>
          <td>
          
            <div class="dropdown">
              <button class="btn btn-dark dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
           <i class="bi bi-ui-checks"></i>     Outils
              </button>
              <ul class="dropdown-menu">
                {%if bon.status == 0%}
                <form method="POST" action="/valid/{{bon.id}}/">
                  {%csrf_token%}
                <li><button type='submit' class="dropdown-item btn btn-success"><i class="bi bi-check-circle-fill"></i> Valider</button></li>
              </form>
              {%endif%}
                <li><a class="dropdown-item" href="/add_operations/{{bon.id}}/"><i class="bi bi-plus-square-dotted"></i> Ajouter Operation</a></li>
              
                <li><a class="dropdown-item" href="#"><i class="bi bi-pencil-square"></i> Mise A Jour</a></li>
                <li><a class="dropdown-item" href="#"><i class="bi bi-trash"></i> Annuler</a></li>
                {%if bon.status == 1%}
                <li><a class="dropdown-item" href="/fiche_bon/{{bon.id}}/"> <i class="bi bi-printer-fill"></i>Generer Bon Commnade</a></li>

                <li><a class="dropdown-item" href="/fiche/{{bon.id}}/"> <i class="bi bi-printer-fill"></i>Generer Fiche De Bon </a></li>
             
                <li><a class="dropdown-item" href="/certificat/{{bon.id}}/"> <i class="bi bi-printer-fill"></i>Generer Certificat Engagement</a></li>
             
                <li><a class="dropdown-item" href="/autorisation/{{bon.id}}/"> <i class="bi bi-printer-fill"></i>Generer Autorisation D'engagement</a></li>
             
                {%endif%}
              </ul>
            </div>
          
          </td>
        </tr>
        {%endfor%}
   
      </tbody>
    </table>
    
  </div>
</div>

<div class="modal fade" id="largeModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" style="font-weight: bold;font-family: forte;">CREER UN BON DE COMMANDE</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
          <div class="card">
              <div class="card-body">
                <h5 class="card-title">Renseignez Les Informations Relatives Aux Bons De COmmandes</h5>
  
                <!-- No Labels Form -->
                <form class="row g-3" method="POST" action="/add_lettrecommande/">
                  {%csrf_token%}

                  <div class="col-md-12">
                    <label >Numero De Bon Commande</label>
                <input type="text" name="numero_commande" class="form-control" placeholder="Numero De Commande">
                </div>

                  <!-- <div class="col-md-6">
                      <label >Prestataires</label>
                    <select class="form-control" name="societe" id="prestatires">
                      <option>selectionnez Un Prestataire</option>
                      {%for prestataires in prestataire%}
                        <option value="{{prestataires.id}}">{{prestataires.nom}}</option>
                        {%endfor%}
                    </select>
                  </div>
               
                  <div class="col-md-6">
                     
                      <label >Operations</label>
                      <select class="form-control" name="operations" id="operation">
                        <option>selectionnez Une Operation</option>
                        {%for operations in operation%} -->
                          <!-- <option value="{{operations.id}}">{{operations.nom}}</option>
                          {%endfor%}
                      </select>
                
                    </div>
                    <div class="col-md-6">
                     
                      <label >Sous Programme</label>
                      <select class="form-control" name="sous_programme" id='sous_programme'>

                      </select>
                    </div>
                    
                    <div class="col-md-6">
                     
                      <label >Activite</label>
                      <select class="form-control" name="activite" id="activite">

                      </select>
                    </div> -->
                    <!-- <div class="col-md-6">
                     
                      <label >Taches</label>
                      <select class="form-control" name="tache" id="tache">

                      </select>
                    </div>
                    <div class="col-md-6">
                     
                      <label >Paragraphes</label>
                      <select class="form-control" name="paragraphes" id="paragraphe">

                      </select>
                    </div>
                     -->

                   
                    <div class="col-md-6">
                     
                      <label >TVA A UTILISER</label>
                      <select class="form-control" name="tva" id="tva">
                        <option>selectionnez Une TVA A Utiliser   </option>
                        {%for tvas in tva%}
                          <option value="{{tvas.id}}">{{tvas.nom}}</option>
                          {%endfor%}
                      </select>
                      </div>
                      <div class="col-md-6">
                      <label >IR A UTILISER</label>
                      <select class="form-control" name="ir" id="ir">
                        <option>selectionnez Une IR A Utiliser Pour Cette Commande</option>
                        {%for irs in ir%}
                          <option value="{{irs.id}}">{{irs.nom}}</option>
                          {%endfor%}
                      </select>
                    
              </div>
              <div class="col-md-6">
                <label >Institution</label>
                <select class="form-control" name="institution" id="institution">
                  <option>selectionnez Une Institution</option>
                  {%for institutions in institution%}
                    <option value="{{institutions.id}}">{{institutions.nom}}</option>
                    {%endfor%}
                </select>
              
        </div>
        <div class="col-md-6">
          <label >Prestataire</label>
          <select class="form-control" name="societe" id="prestataire">
            <option>selectionnez Un Prestataire</option>
            {%for societes in societe%}
              <option value="{{societes.id}}">{{societes.nom}}</option>
              {%endfor%}
          </select>
        
  </div>
          </div>
            </div>
      
      </div>
      <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal"><i class="bi bi-hand-thumbs-down-fill"></i> Close</button>
          <button type="submit" class="btn btn-primary">&nbsp;<i class='bi bi-hand-thumbs-up-fill'></i> Enregistrer</button>

      </div>
             
  </form><!-- End No Labels Form -->
  
    </div>
  </div>
</div>
</div></div>
            </div>
            <div class="tab-pane fade " id="bordered-justified-profile" role="tabpanel" aria-labelledby="profile-tab">
        <!-- Gestion des Lettres Commandes -->
         <!-- Gestion des Lettres Commandes --><!-- Gestion des Lettres Commandes --><!-- Gestion des Lettres Commandes -->
          <!-- Gestion des Lettres Commandes --><!-- Gestion des Lettres Commandes --><!-- Gestion des Lettres Commandes -->
           <!-- Gestion des Lettres Commandes --><!-- Gestion des Lettres Commandes --><!-- Gestion des Lettres Commandes -->
                   
          <div class="col-md-12">
            <div class="card">
                <div class="card-body">
                  <h5 class="card-title" style="font-weight: bold;font-family: forte;">GESTION DES LETTRES COMMANDES</h5>
    
                  <nav>
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
                      
                      <li class="breadcrumb-item active">Lettre  Commande</li>
                    </ol>
                  </nav>
                </div>
              </div>

            </div>
            <div class="card">
              <div class="card-body">
              <div class="container">
                <div class="table-wrapper">
                  <div class="table-title">
                    <div class="row">
                      <div class="col-sm-6">
                      <h5 style="font-weight: bold;" style="font-family:forte">LISTE DES LETTRES COMMANDES</h5>
                      </div>
                      <div class="col-sm-6">
                        <a  class="btn btn-success"  data-bs-toggle="modal" data-bs-target="#largeModal_lettre"><i class="bi bi-plus-circle-dotted"></i> <span>Ajouter</span></a>
                        <a href="" class="btn btn-danger"><i class="bi bi-dash-circle-dotted"></i> <span>supprimer</span></a>
                      </div>
                    </div>
                  </div>
                  <table class="datatable table table-hover table-responsive text-center " >
                    <thead>
                      <tr>
                        <th style="width: 25%;">
                            code
                    
                        </th>
         
          
              <!-- <th>Operations</th>
          
              <th>Sous-Programmes</th>
              <th>Activites</th> -->
              <th>Tva </th>
              <th>Ir</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
    
            {%for lettre in lettrecommande%}
            <tr>
             
              <td style="font-weight: bold;">
                
                <a href="/add_references/{{bon.id}}/"> <i class="bi bi-journal-text"></i>   {{lettre.numero_lettre}}      </a>
              </td>
              <!-- <td>{{bon.idoperation}}</td>
             
              <td>{{bon.idsousprogramme}}</td>
              <td>{{bon.idactivite}}</td> -->
              <td>{{lettre.idtva.nom}}</td>
              <td>{{lettre.idir.nom}}</td>
              <td>
                <label>
                  {%if lettre.status == 1%}
                  <input type="checkbox" name="checkboxYannis" checked/>  
                  <div class="btn btn-sık"><span>Valide</span></div>
                  {%elif lettre.status == 0%}  
                  <input type="checkbox" name="checkboxYannis"/>  
                    <div class="btn btn-sık"><span>Non Valide</span></div>
                    {%endif%}
              </label>
              </td>
              <td>
              
                <div class="dropdown">
                  <button class="btn btn-dark dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
               <i class="bi bi-ui-checks"></i>     Outils
                  </button>
                  <ul class="dropdown-menu">
                    {%if lettre.status == 0%}
                    <form method="POST" action="/valid/{{lettre.id}}/">
                      {%csrf_token%}
                    <li><button type='submit' class="dropdown-item btn btn-success"><i class="bi bi-check-circle-fill"></i> Valider</button></li>
                  </form>
                  {%endif%}
                    <li><a class="dropdown-item" href="/add_operation_lettre/{{lettre.id}}/"><i class="bi bi-plus-square-dotted"></i> Ajouter Operation</a></li>
                  
                    <li><a class="dropdown-item" href="#"><i class="bi bi-pencil-square"></i> Mise A Jour</a></li>
                    <li><a class="dropdown-item" href="#"><i class="bi bi-trash"></i> Annuler</a></li>
                    {%if lettre.status == 1%}
                    <li><a class="dropdown-item" href="/fiche_bon/{{lettre.id}}/"> <i class="bi bi-printer-fill"></i>Generer Certificat Engagement</a></li>
                    {%endif%}
                  </ul>
                </div>
              
              </td>
            </tr>
            {%endfor%}
       
          </tbody>
        </table>
        
      </div>
    </div>
    
    <div class="modal fade" id="largeModal_lettre" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" style="font-weight: bold;font-family: forte;">CREER UNE LETTRE DE COMMANDE</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">Renseignez Les Informations Relatives Aux Lettres De COmmandes</h5>
      
                    <!-- No Labels Form -->
                    <form class="row g-3" method="POST" action="/add_lettre_commande/">
                      {%csrf_token%}
    
                      <div class="col-md-12">
                        <label >Numero De Lettre Commande</label>
                    <input type="text" name="numero_lettre" class="form-control" placeholder="Numero De Commande">
                    </div>
    
                      <!-- <div class="col-md-6">
                          <label >Prestataires</label>
                        <select class="form-control" name="societe" id="prestatires">
                          <option>selectionnez Un Prestataire</option>
                          {%for prestataires in prestataire%}
                            <option value="{{prestataires.id}}">{{prestataires.nom}}</option>
                            {%endfor%}
                        </select>
                      </div>
                   
                      <div class="col-md-6">
                         
                          <label >Operations</label>
                          <select class="form-control" name="operations" id="operation">
                            <option>selectionnez Une Operation</option>
                            {%for operations in operation%} -->
                              <!-- <option value="{{operations.id}}">{{operations.nom}}</option>
                              {%endfor%}
                          </select>
                    
                        </div>
                        <div class="col-md-6">
                         
                          <label >Sous Programme</label>
                          <select class="form-control" name="sous_programme" id='sous_programme'>
    
                          </select>
                        </div>
                        
                        <div class="col-md-6">
                         
                          <label >Activite</label>
                          <select class="form-control" name="activite" id="activite">
    
                          </select>
                        </div> -->
                        <!-- <div class="col-md-6">
                         
                          <label >Taches</label>
                          <select class="form-control" name="tache" id="tache">
    
                          </select>
                        </div>
                        <div class="col-md-6">
                         
                          <label >Paragraphes</label>
                          <select class="form-control" name="paragraphes" id="paragraphe">
    
                          </select>
                        </div>
                         -->
    
                       
                        <div class="col-md-6">
                         
                          <label >TVA A UTILISER</label>
                          <select class="form-control" name="tva" id="tva">
                            <option>selectionnez Une TVA A Utiliser   </option>
                            {%for tvas in tva%}
                              <option value="{{tvas.id}}">{{tvas.nom}}</option>
                              {%endfor%}
                          </select>
                          </div>
                          <div class="col-md-6">
                          <label >IR A UTILISER</label>
                          <select class="form-control" name="ir" id="ir">
                            <option>selectionnez Une IR A Utiliser Pour Cette Commande</option>
                            {%for irs in ir%}
                              <option value="{{irs.id}}">{{irs.nom}}</option>
                              {%endfor%}
                          </select>
                        
                  </div>
                  <div class="col-md-6">
                    <label >Institution</label>
                    <select class="form-control" name="institution" id="institution">
                      <option>selectionnez Une Institution</option>
                      {%for institutions in institution%}
                        <option value="{{institutions.id}}">{{institutions.nom}}</option>
                        {%endfor%}
                    </select>
                  
            </div>
            <div class="col-md-6">
              <label >Prestataire</label>
              <select class="form-control" name="societe" id="prestataire">
                <option>selectionnez Un Prestataire</option>
                {%for societes in societe%}
                  <option value="{{societes.id}}">{{societes.nom}}</option>
                  {%endfor%}
              </select>
            
      </div>
              </div>
                </div>
          
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-danger" data-bs-dismiss="modal"><i class="bi bi-hand-thumbs-down-fill"></i> Close</button>
              <button type="submit" class="btn btn-primary">&nbsp;<i class='bi bi-hand-thumbs-up-fill'></i> Enregistrer</button>
    
          </div>
                 
      </form><!-- End No Labels Form -->
      
        </div>
      </div>
    </div>
    </div></div>
           
           
            </div>
            <div class="tab-pane fade" id="bordered-justified-contact" role="tabpanel" aria-labelledby="contact-tab">
         
         
              <div class="col-md-12">
                <div class="card">
                    <div class="card-body">
                      <h5 class="card-title" style="font-weight: bold;font-family: forte;">GESTION DES ORDONANCEMENTS</h5>
        
                      <nav>
                        <ol class="breadcrumb">
                          <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
                          
                          <li class="breadcrumb-item active">Engagements</li>
                        </ol>
                      </nav>
                    </div>
                  </div>
    
                </div>
                <div class="card">
                  <div class="card-body">
                  <div class="container">
                    <div class="table-wrapper">
                      <div class="table-title">
                        <div class="row">
                          <div class="col-sm-6">
                          <h5 style="font-weight: bold;" style="font-family:forte">LISTE DES ORDONANCEMENTS</h5>
                          </div>
                          <div class="col-sm-6">
                            <a  class="btn btn-success"  data-bs-toggle="modal" data-bs-target="#largeModal_ordonancement"><i class="bi bi-plus-circle-dotted"></i> <span>Ajouter</span></a>
                            <a href="" class="btn btn-danger"><i class="bi bi-dash-circle-dotted"></i> <span>supprimer</span></a>
                          </div>
                        </div>
                      </div>
                      <table class="datatable table table-hover table-responsive text-center " >
                        <thead>
                          <tr>
                            <th style="width: 25%;">
                                code
                        
                            </th>
             
              
                  <!-- <th>Operations</th>
              
                  <th>Sous-Programmes</th>
                  <th>Activites</th> -->
                  <th>Tva </th>
                  <th>Ir</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
        
                {%for ordonancements in ordonancement%}
                <tr>
                 
                  <td style="font-weight: bold;">
                    
                    <a href="/add_reference/{{ordonancements.id}}/"> <i class="bi bi-journal-text"></i>   {{ordonancements.numero_ordonancement}}      </a>
                  </td>
                  <!-- <td>{{bon.idoperation}}</td>
                 
                  <td>{{bon.idsousprogramme}}</td>
                  <td>{{bon.idactivite}}</td> -->
                  <td>{{ordonancements.idtva.nom}}</td>
                  <td>{{ordonancements.idir.nom}}</td>
                  <td>
                    <label>
                      {%if ordonancements.status == 1%}
                      <input type="checkbox" name="checkboxYannis" checked/>  
                      <div class="btn btn-sık"><span>Valide</span></div>
                      {%elif ordonancements.status == 0%}  
                      <input type="checkbox" name="checkboxYannis"/>  
                        <div class="btn btn-sık"><span>Non Valide</span></div>
                        {%endif%}
                  </label>
                  </td>
                  <td>
                  
                    <div class="dropdown">
                      <button class="btn btn-dark dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                   <i class="bi bi-ui-checks"></i>     Outils
                      </button>
                      <ul class="dropdown-menu">
                        {%if ordonancements.status == 0%}
                        <form method="POST" action="/valid/{{lettre.id}}/">
                          {%csrf_token%}
                        <li><button type='submit' class="dropdown-item btn btn-success"><i class="bi bi-check-circle-fill"></i> Valider</button></li>
                      </form>
                      {%endif%}
                        <li><a class="dropdown-item" href="/add_operation_ordonancement/{{ordonancements.id}}/"><i class="bi bi-plus-square-dotted"></i> Ajouter Operation</a></li>
                      
                        <li><a class="dropdown-item" href="#"><i class="bi bi-pencil-square"></i> Mise A Jour</a></li>
                        <li><a class="dropdown-item" href="#"><i class="bi bi-trash"></i> Annuler</a></li>
                        {%if ordonancements.status == 1%}
                        <li><a class="dropdown-item" href="/fiche_bon/{{ordonancements.id}}/"> <i class="bi bi-printer-fill"></i>Generer Certificat Engagement</a></li>
                        {%endif%}
                      </ul>
                    </div>
                  
                  </td>
                </tr>
                {%endfor%}
           
              </tbody>
            </table>
            
          </div>
        </div>
        
        <div class="modal fade" id="largeModal_ordonancement" tabindex="-1">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" style="font-weight: bold;font-family: forte;">Creer Un Ordonancements</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                  <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">Renseignez Les Informations Relatives Aux Ordonancements</h5>
          
                        <!-- No Labels Form -->
                        <form class="row g-3" method="POST" action="/add_ordonancement/">
                          {%csrf_token%}
        
                          <div class="col-md-12">
                            <label >Numero Ordonancement</label>
                        <input type="text" name="numero" class="form-control" placeholder="Numero Ordonancement">
                        </div>
        
                          <!-- <div class="col-md-6">
                              <label >Prestataires</label>
                            <select class="form-control" name="societe" id="prestatires">
                              <option>selectionnez Un Prestataire</option>
                              {%for prestataires in prestataire%}
                                <option value="{{prestataires.id}}">{{prestataires.nom}}</option>
                                {%endfor%}
                            </select>
                          </div>
                       
                          <div class="col-md-6">
                             
                              <label >Operations</label>
                              <select class="form-control" name="operations" id="operation">
                                <option>selectionnez Une Operation</option>
                                {%for operations in operation%} -->
                                  <!-- <option value="{{operations.id}}">{{operations.nom}}</option>
                                  {%endfor%}
                              </select>
                        
                            </div>
                            <div class="col-md-6">
                             
                              <label >Sous Programme</label>
                              <select class="form-control" name="sous_programme" id='sous_programme'>
        
                              </select>
                            </div>
                            
                            <div class="col-md-6">
                             
                              <label >Activite</label>
                              <select class="form-control" name="activite" id="activite">
        
                              </select>
                            </div> -->
                            <!-- <div class="col-md-6">
                             
                              <label >Taches</label>
                              <select class="form-control" name="tache" id="tache">
        
                              </select>
                            </div>
                            <div class="col-md-6">
                             
                              <label >Paragraphes</label>
                              <select class="form-control" name="paragraphes" id="paragraphe">
        
                              </select>
                            </div>
                             -->
        
                           
                            <div class="col-md-6">
                             
                              <label >TVA A UTILISER</label>
                              <select class="form-control" name="tva" id="tva">
                                <option>selectionnez Une TVA A Utiliser   </option>
                                {%for tvas in tva%}
                                  <option value="{{tvas.id}}">{{tvas.nom}}</option>
                                  {%endfor%}
                              </select>
                              </div>
                              <div class="col-md-6">
                              <label >IR A UTILISER</label>
                              <select class="form-control" name="ir" id="ir">
                                <option>selectionnez Une IR A Utiliser Pour Cette Commande</option>
                                {%for irs in ir%}
                                  <option value="{{irs.id}}">{{irs.nom}}</option>
                                  {%endfor%}
                              </select>
                            
                      </div>
                      <div class="col-md-6">
                        <label >Institution</label>
                        <select class="form-control" name="institution" id="institution">
                          <option>selectionnez Une Institution</option>
                          {%for institutions in institution%}
                            <option value="{{institutions.id}}">{{institutions.nom}}</option>
                            {%endfor%}
                        </select>
                      
                </div>
                <div class="col-md-6">
                  <label >Prestataire</label>
                  <select class="form-control" name="societe" id="prestataire">
                    <option>selectionnez Un Prestataire</option>
                    {%for societes in societe%}
                      <option value="{{societes.id}}">{{societes.nom}}</option>
                      {%endfor%}
                  </select>
                
          </div>
                  </div>
                    </div>
              
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-bs-dismiss="modal"><i class="bi bi-hand-thumbs-down-fill"></i> Close</button>
                  <button type="submit" class="btn btn-primary">&nbsp;<i class='bi bi-hand-thumbs-up-fill'></i> Enregistrer</button>
        
              </div>
                     
          </form><!-- End No Labels Form -->
          
            </div>
          </div>
        </div>
        </div></div>
               
         
         
         
         
            </div>


            <div class="tab-pane fade" id="bordered-justified-decision" role="tabpanel" aria-labelledby="decision-tab">
              <div class="col-md-12">
                <div class="card">
                    <div class="card-body">
                      <h5 class="card-title" style="font-weight: bold;font-family: forte;">GESTION DES DECISIONS</h5>
        
                      <nav>
                        <ol class="breadcrumb">
                          <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
                          
                          <li class="breadcrumb-item active">Decisions</li>
                        </ol>
                      </nav>
                    </div>
                  </div>
    
                </div>
                <div class="card">
                  <div class="card-body">
                  <div class="container">
                    <div class="table-wrapper">
                      <div class="table-title">
                        <div class="row">
                          <div class="col-sm-6">
                          <h5 style="font-weight: bold;" style="font-family:forte">LISTE DES DECISIONS</h5>
                          </div>
                          <div class="col-sm-6">
                            <a  class="btn btn-success"  data-bs-toggle="modal" data-bs-target="#largeModal_decision"><i class="bi bi-plus-circle-dotted"></i> <span>Ajouter</span></a>
                            <a href="" class="btn btn-danger"><i class="bi bi-dash-circle-dotted"></i> <span>supprimer</span></a>
                          </div>
                        </div>
                      </div>
                      <table class="datatable table table-hover table-responsive text-center " >
                        <thead>
                          <tr>
                            <th style="width: 25%;">
                                code
                        
                            </th>
             
              
                  <!-- <th>Operations</th>
              
                  <th>Sous-Programmes</th>
                  <th>Activites</th> -->
                  <th>Tva </th>
                  <th>Ir</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
        
                {%for decisions in decision%}
                <tr>
                 
                  <td style="font-weight: bold;">
                    
                    <a href="/add_references/{{decisions.id}}/"> <i class="bi bi-journal-text"></i>   {{decisions.numero_decision}}      </a>
                  </td>
                  <!-- <td>{{bon.idoperation}}</td>
                 
                  <td>{{bon.idsousprogramme}}</td>
                  <td>{{bon.idactivite}}</td> -->
                  <td>{{decisions.idtva.nom}}</td>
                  <td>{{decisions.idir.nom}}</td>
                  <td>
                    <label>
                      {%if decisions.status == 1%}
                      <input type="checkbox" name="checkboxYannis" checked/>  
                      <div class="btn btn-sık"><span>Valide</span></div>
                      {%elif decisions.status == 0%}  
                      <input type="checkbox" name="checkboxYannis"/>  
                        <div class="btn btn-sık"><span>Non Valide</span></div>
                        {%endif%}
                  </label>
                  </td>
                  <td>
                  
                    <div class="dropdown">
                      <button class="btn btn-dark dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                   <i class="bi bi-ui-checks"></i>     Outils
                      </button>
                      <ul class="dropdown-menu">
                        {%if decisions.status == 0%}
                        <form method="POST" action="/valid/{{lettre.id}}/">
                          {%csrf_token%}
                        <li><button type='submit' class="dropdown-item btn btn-success"><i class="bi bi-check-circle-fill"></i> Valider</button></li>
                      </form>
                      {%endif%}
                        <li><a class="dropdown-item" href="/decisions_operations/{{decisions.id}}/"><i class="bi bi-plus-square-dotted"></i> Ajouter Operation</a></li>
                      
                        <li><a class="dropdown-item" href="#"><i class="bi bi-pencil-square"></i> Mise A Jour</a></li>
                        <li><a class="dropdown-item" href="#"><i class="bi bi-trash"></i> Annuler</a></li>
                        {%if decisions.status == 1%}
                        <li><a class="dropdown-item" href="/fiche_bon/{{lettre.id}}/"> <i class="bi bi-printer-fill"></i>Generer Certificat Engagement</a></li>
                        {%endif%}
                      </ul>
                    </div>
                  
                  </td>
                </tr>
                {%endfor%}
           
              </tbody>
            </table>
            
          </div>
        </div>
        
        <div class="modal fade" id="largeModal_decision" tabindex="-1">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" style="font-weight: bold;font-family: forte;">Creer Une Decision</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                  <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">Renseignez Les Informations Relatives Aux Decisions</h5>
          
                        <!-- No Labels Form -->
                        <form class="row g-3" method="POST" action="/add_decision/">
                          {%csrf_token%}
        
                          <div class="col-md-12">
                            <label >Numero Decision</label>
                        <input type="text" name="numero" class="form-control" placeholder="Numero Decision">
                        </div>
        
                          <!-- <div class="col-md-6">
                              <label >Prestataires</label>
                            <select class="form-control" name="societe" id="prestatires">
                              <option>selectionnez Un Prestataire</option>
                              {%for prestataires in prestataire%}
                                <option value="{{prestataires.id}}">{{prestataires.nom}}</option>
                                {%endfor%}
                            </select>
                          </div>
                       
                          <div class="col-md-6">
                             
                              <label >Operations</label>
                              <select class="form-control" name="operations" id="operation">
                                <option>selectionnez Une Operation</option>
                                {%for operations in operation%} -->
                                  <!-- <option value="{{operations.id}}">{{operations.nom}}</option>
                                  {%endfor%}
                              </select>
                        
                            </div>
                            <div class="col-md-6">
                             
                              <label >Sous Programme</label>
                              <select class="form-control" name="sous_programme" id='sous_programme'>
        
                              </select>
                            </div>
                            
                            <div class="col-md-6">
                             
                              <label >Activite</label>
                              <select class="form-control" name="activite" id="activite">
        
                              </select>
                            </div> -->
                            <!-- <div class="col-md-6">
                             
                              <label >Taches</label>
                              <select class="form-control" name="tache" id="tache">
        
                              </select>
                            </div>
                            <div class="col-md-6">
                             
                              <label >Paragraphes</label>
                              <select class="form-control" name="paragraphes" id="paragraphe">
        
                              </select>
                            </div>
                             -->
        
                           
                            <div class="col-md-6">
                             
                              <label >TVA A UTILISER</label>
                              <select class="form-control" name="tva" id="tva">
                                <option>selectionnez Une TVA A Utiliser   </option>
                                {%for tvas in tva%}
                                  <option value="{{tvas.id}}">{{tvas.nom}}</option>
                                  {%endfor%}
                              </select>
                              </div>
                              <div class="col-md-6">
                              <label >IR A UTILISER</label>
                              <select class="form-control" name="ir" id="ir">
                                <option>selectionnez Une IR A Utiliser Pour Cette Commande</option>
                                {%for irs in ir%}
                                  <option value="{{irs.id}}">{{irs.nom}}</option>
                                  {%endfor%}
                              </select>
                            
                      </div>
                      <div class="col-md-6">
                        <label >Institution</label>
                        <select class="form-control" name="institution" id="institution">
                          <option>selectionnez Une Institution</option>
                          {%for institutions in institution%}
                            <option value="{{institutions.id}}">{{institutions.nom}}</option>
                            {%endfor%}
                        </select>
                      
                </div>
                <div class="col-md-6">
                  <label >Prestataire</label>
                  <select class="form-control" name="societe" id="prestataire">
                    <option>selectionnez Un Prestataire</option>
                    {%for societes in societe%}
                      <option value="{{societes.id}}">{{societes.nom}}</option>
                      {%endfor%}
                  </select>
                
          </div>
                  </div>
                    </div>
              
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-bs-dismiss="modal"><i class="bi bi-hand-thumbs-down-fill"></i> Close</button>
                  <button type="submit" class="btn btn-primary">&nbsp;<i class='bi bi-hand-thumbs-up-fill'></i> Enregistrer</button>
        
              </div>
                     
          </form><!-- End No Labels Form -->
          
            </div>
          </div>
        </div>
        </div></div>
               
            </div>



        
            <div class="tab-pane fade" id="bordered-justified-ordre" role="tabpanel" aria-labelledby="ordre-tab">
              <div class="col-md-12">
                <div class="card">
                    <div class="card-body">
                      <h5 class="card-title" style="font-weight: bold;font-family: forte;">GESTION DES ORDRES MISSIONS</h5>
        
                      <nav>
                        <ol class="breadcrumb">
                          <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
                          
                          <li class="breadcrumb-item active">Ordres De Mission</li>
                        </ol>
                      </nav>
                    </div>
                  </div>
    
                </div>
                <div class="card">
                  <div class="card-body">
                  <div class="container">
                    <div class="table-wrapper">
                      <div class="table-title">
                        <div class="row">
                          <div class="col-sm-6">
                          <h5 style="font-weight: bold;" style="font-family:forte">LISTE DES ORDRES DE MISSION</h5>
                          </div>
                          <div class="col-sm-6">
                            <a  class="btn btn-success"  data-bs-toggle="modal" data-bs-target="#largeModal_ordre"><i class="bi bi-plus-circle-dotted"></i> <span>Ajouter</span></a>
                            <a href="" class="btn btn-danger"><i class="bi bi-dash-circle-dotted"></i> <span>supprimer</span></a>
                          </div>
                        </div>
                      </div>
                      <table class="datatable table table-hover table-responsive text-center " >
                        <thead>
                          <tr>
                            <th style="width: 25%;">
                                code
                        
                            </th>
             
              
                  <!-- <th>Operations</th>
              
                  <th>Sous-Programmes</th>
                  <th>Activites</th> -->
                  <th>Tva </th>
                  <th>Ir</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
        
                {%for lettre in salaire%}
                <tr>
                 
                  <td style="font-weight: bold;">
                    
                    <a href="/add_references/{{bon.id}}/"> <i class="bi bi-journal-text"></i>   {{lettre.numero_lettre}}      </a>
                  </td>
                  <!-- <td>{{bon.idoperation}}</td>
                 
                  <td>{{bon.idsousprogramme}}</td>
                  <td>{{bon.idactivite}}</td> -->
                  <td>{{lettre.idtva.nom}}</td>
                  <td>{{lettre.idir.nom}}</td>
                  <td>
                    <label>
                      {%if lettre.status == 1%}
                      <input type="checkbox" name="checkboxYannis" checked/>  
                      <div class="btn btn-sık"><span>Valide</span></div>
                      {%elif lettre.status == 0%}  
                      <input type="checkbox" name="checkboxYannis"/>  
                        <div class="btn btn-sık"><span>Non Valide</span></div>
                        {%endif%}
                  </label>
                  </td>
                  <td>
                  
                    <div class="dropdown">
                      <button class="btn btn-dark dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                   <i class="bi bi-ui-checks"></i>     Outils
                      </button>
                      <ul class="dropdown-menu">
                        {%if lettre.status == 0%}
                        <form method="POST" action="/valid/{{lettre.id}}/">
                          {%csrf_token%}
                        <li><button type='submit' class="dropdown-item btn btn-success"><i class="bi bi-check-circle-fill"></i> Valider</button></li>
                      </form>
                      {%endif%}
                        <li><a class="dropdown-item" href="/add_operation_lettre/{{lettre.id}}/"><i class="bi bi-plus-square-dotted"></i> Ajouter Operation</a></li>
                      
                        <li><a class="dropdown-item" href="#"><i class="bi bi-pencil-square"></i> Mise A Jour</a></li>
                        <li><a class="dropdown-item" href="#"><i class="bi bi-trash"></i> Annuler</a></li>
                        {%if lettre.status == 1%}
                        <li><a class="dropdown-item" href="/fiche_bon/{{lettre.id}}/"> <i class="bi bi-printer-fill"></i>Generer Certificat Engagement</a></li>
                        {%endif%}
                      </ul>
                    </div>
                  
                  </td>
                </tr>
                {%endfor%}
           
              </tbody>
            </table>
            
          </div>
        </div>
        
        <div class="modal fade" id="largeModal_ordre" tabindex="-1">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" style="font-weight: bold;font-family: forte;">Creer L'ordre De Mission</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                  <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">Renseignez Les Informations Relatives Aux Ordres De Mission</h5>
          
                        <!-- No Labels Form -->
                        <form class="row g-3" method="POST" action="/add_decision/">
                          {%csrf_token%}
        
                          <div class="col-md-12">
                            <label >Numero Ordre Mission</label>
                        <input type="text" name="numero_ordonancement" class="form-control" placeholder="Numero Ordonancement">
                        </div>
        
                          <!-- <div class="col-md-6">
                              <label >Prestataires</label>
                            <select class="form-control" name="societe" id="prestatires">
                              <option>selectionnez Un Prestataire</option>
                              {%for prestataires in prestataire%}
                                <option value="{{prestataires.id}}">{{prestataires.nom}}</option>
                                {%endfor%}
                            </select>
                          </div>
                       
                          <div class="col-md-6">
                             
                              <label >Operations</label>
                              <select class="form-control" name="operations" id="operation">
                                <option>selectionnez Une Operation</option>
                                {%for operations in operation%} -->
                                  <!-- <option value="{{operations.id}}">{{operations.nom}}</option>
                                  {%endfor%}
                              </select>
                        
                            </div>
                            <div class="col-md-6">
                             
                              <label >Sous Programme</label>
                              <select class="form-control" name="sous_programme" id='sous_programme'>
        
                              </select>
                            </div>
                            
                            <div class="col-md-6">
                             
                              <label >Activite</label>
                              <select class="form-control" name="activite" id="activite">
        
                              </select>
                            </div> -->
                            <!-- <div class="col-md-6">
                             
                              <label >Taches</label>
                              <select class="form-control" name="tache" id="tache">
        
                              </select>
                            </div>
                            <div class="col-md-6">
                             
                              <label >Paragraphes</label>
                              <select class="form-control" name="paragraphes" id="paragraphe">
        
                              </select>
                            </div>
                             -->
        
                           
                            <div class="col-md-6">
                             
                              <label >TVA A UTILISER</label>
                              <select class="form-control" name="tva" id="tva">
                                <option>selectionnez Une TVA A Utiliser   </option>
                                {%for tvas in tva%}
                                  <option value="{{tvas.id}}">{{tvas.nom}}</option>
                                  {%endfor%}
                              </select>
                              </div>
                              <div class="col-md-6">
                              <label >IR A UTILISER</label>
                              <select class="form-control" name="ir" id="ir">
                                <option>selectionnez Une IR A Utiliser Pour Cette Commande</option>
                                {%for irs in ir%}
                                  <option value="{{irs.id}}">{{irs.nom}}</option>
                                  {%endfor%}
                              </select>
                            
                      </div>
                      <div class="col-md-6">
                        <label >Institution</label>
                        <select class="form-control" name="institution" id="institution">
                          <option>selectionnez Une Institution</option>
                          {%for institutions in institution%}
                            <option value="{{institutions.id}}">{{institutions.nom}}</option>
                            {%endfor%}
                        </select>
                      
                </div>
                <div class="col-md-6">
                  <label >Prestataire</label>
                  <select class="form-control" name="societe" id="prestataire">
                    <option>selectionnez Un Prestataire</option>
                    {%for societes in societe%}
                      <option value="{{societes.id}}">{{societes.nom}}</option>
                      {%endfor%}
                  </select>
                
          </div>
                  </div>
                    </div>
              
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-bs-dismiss="modal"><i class="bi bi-hand-thumbs-down-fill"></i> Close</button>
                  <button type="submit" class="btn btn-primary">&nbsp;<i class='bi bi-hand-thumbs-up-fill'></i> Enregistrer</button>
        
              </div>
                     
          </form><!-- End No Labels Form -->
          
            </div>
          </div>
        </div>
        </div></div>
               
            </div>






            <div class="tab-pane fade" id="bordered-justified-marche" role="tabpanel" aria-labelledby="marche-tab"></div>
              <div class="col-md-12">
                <div class="card">
                    <div class="card-body">
                      <h5 class="card-title" style="font-weight: bold;font-family: forte;">GESTION DES MARCHES</h5>
        
                      <nav>
                        <ol class="breadcrumb">
                          <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
                          
                          <li class="breadcrumb-item active">March&eacute;</li>
                        </ol>
                      </nav>
                    </div>
                  </div>
    
                </div>
                <div class="card">
                  <div class="card-body">
                  <div class="container">
                    <div class="table-wrapper">
                      <div class="table-title">
                        <div class="row">
                          <div class="col-sm-6">
                          <h5 style="font-weight: bold;" style="font-family:forte">LISTE DES MARCHES</h5>
                          </div>
                          <div class="col-sm-6">
                            <a  class="btn btn-success"  data-bs-toggle="modal" data-bs-target="#largeModal_marche"><i class="bi bi-plus-circle-dotted"></i> <span>Ajouter</span></a>
                            <a href="" class="btn btn-danger"><i class="bi bi-dash-circle-dotted"></i> <span>supprimer</span></a>
                          </div>
                        </div>
                      </div>
                      <table class="datatable table table-hover table-responsive text-center " >
                        <thead>
                          <tr>
                            <th style="width: 25%;">
                                code
                        
                            </th>
             
              
                  <!-- <th>Operations</th>
              
                  <th>Sous-Programmes</th>
                  <th>Activites</th> -->
                  <th>Tva </th>
                  <th>Ir</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
        
                {%for marches in marche%}
                <tr>
                 
                  <td style="font-weight: bold;">
                    
                    <a href="/add_references/{{bon.id}}/"> <i class="bi bi-journal-text"></i>   {{marches.numero_marche}}      </a>
                  </td>
                  <!-- <td>{{bon.idoperation}}</td>
                 
                  <td>{{bon.idsousprogramme}}</td>
                  <td>{{bon.idactivite}}</td> -->
                  <td>{{marches.idtva.nom}}</td>
                  <td>{{marches.idir.nom}}</td>
                  <td>
                    <label>
                      {%if marches.status == 1%}
                      <input type="checkbox" name="checkboxYannis" checked/>  
                      <div class="btn btn-sık"><span>Valide</span></div>
                      {%elif marches.status == 0%}  
                      <input type="checkbox" name="checkboxYannis"/>  
                        <div class="btn btn-sık"><span>Non Valide</span></div>
                        {%endif%}
                  </label>
                  </td>
                  <td>
                  
                    <div class="dropdown">
                      <button class="btn btn-dark dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                   <i class="bi bi-ui-checks"></i>     Outils
                      </button>
                      <ul class="dropdown-menu">
                        {%if marches.status == 0%}
                        <form method="POST" action="/valid/{{marches.id}}/">
                          {%csrf_token%}
                        <li><button type='submit' class="dropdown-item btn btn-success"><i class="bi bi-check-circle-fill"></i> Valider</button></li>
                      </form>
                      {%endif%}
                        <li><a class="dropdown-item" href="/add_operation_marche/{{marches.id}}/"><i class="bi bi-plus-square-dotted"></i> Ajouter Operation</a></li>
                      
                        <li><a class="dropdown-item" href="#"><i class="bi bi-pencil-square"></i> Mise A Jour</a></li>
                        <li><a class="dropdown-item" href="#"><i class="bi bi-trash"></i> Annuler</a></li>
                        {%if lettre.status == 1%}
                        <li><a class="dropdown-item" href="/fiche_bon/{{marches.id}}/"> <i class="bi bi-printer-fill"></i>Generer Certificat Engagement</a></li>
                        {%endif%}
                      </ul>
                    </div>
                  
                  </td>
                </tr>
                {%endfor%}
           
              </tbody>
            </table>
            
          </div>
        </div>
        
        <div class="modal fade" id="largeModal_marche" tabindex="-1">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" style="font-weight: bold;font-family: forte;">Creer L'ordre De Mission</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                  <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">Renseignez Les Informations Relatives Aux Ordres De Mission</h5>
          
                        <!-- No Labels Form -->
                        <form class="row g-3" method="POST" action="/add_marche/">
                          {%csrf_token%}
        
                          <div class="col-md-12">
                            <label >Numero Marche</label>
                        <input type="text" name="numero" class="form-control" placeholder="Numero Marche">
                        </div>
        
                        
                            <div class="col-md-6">
                             
                              <label >TVA A UTILISER</label>
                              <select class="form-control" name="tva" id="tva">
                                <option>selectionnez Une TVA A Utiliser   </option>
                                {%for tvas in tva%}
                                  <option value="{{tvas.id}}">{{tvas.nom}}</option>
                                  {%endfor%}
                              </select>
                              </div>
                              <div class="col-md-6">
                              <label >IR A UTILISER</label>
                              <select class="form-control" name="ir" id="ir">
                                <option>selectionnez Une IR A Utiliser Pour Cette Commande</option>
                                {%for irs in ir%}
                                  <option value="{{irs.id}}">{{irs.nom}}</option>
                                  {%endfor%}
                              </select>
                            
                      </div>
                      <div class="col-md-6">
                        <label >Institution</label>
                        <select class="form-control" name="institution" id="institution">
                          <option>selectionnez Une Institution</option>
                          {%for institutions in institution%}
                            <option value="{{institutions.id}}">{{institutions.nom}}</option>
                            {%endfor%}
                        </select>
                      
                </div>
                <div class="col-md-6">
                  <label >Prestataire</label>
                  <select class="form-control" name="societe" id="prestataire">
                    <option>selectionnez Un Prestataire</option>
                    {%for societes in societe%}
                      <option value="{{societes.id}}">{{societes.nom}}</option>
                      {%endfor%}
                  </select>
                
          </div>
                  </div>
                    </div>
              
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-bs-dismiss="modal"><i class="bi bi-hand-thumbs-down-fill"></i> Close</button>
                  <button type="submit" class="btn btn-primary">&nbsp;<i class='bi bi-hand-thumbs-up-fill'></i> Enregistrer</button>
        
              </div>
                     
          </form><!-- End No Labels Form -->
          
            </div>
          </div>
        </div>
        </div></div>
               
            </div>
          </div><!-- End Bordered Tabs Justified -->

        </div>
        </div>
         
        <!-- Gestion des Lettres Commandes -->
         <!-- Gestion des Lettres Commandes --><!-- Gestion des Lettres Commandes --><!-- Gestion des Lettres Commandes -->
          <!-- Gestion des Lettres Commandes --><!-- Gestion des Lettres Commandes --><!-- Gestion des Lettres Commandes -->
           <!-- Gestion des Lettres Commandes --><!-- Gestion des Lettres Commandes --><!-- Gestion des Lettres Commandes -->
       

</div>
</div>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>  
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>  
<script>  
    $(document).ready(function() {  
        $('#myTable').DataTable();  
    });  
</script>  

{% for message in messages %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
 {% if message.tags == 'success' %}

<script type="text/javascript">
 Swal.fire({
 position: "top-end",
 icon: "success",
 title: "{{message}}",
 showConfirmButton: false,
 timer: 2000
});
</script>
{%endif%}
{%endfor%}
</script>
{% for message in messages %}

 {% if message.tags == 'error' %}

<script type="text/javascript">
 Swal.fire({
 position: "top-end",
 icon: "error",
 title: "{{message}}",
 showConfirmButton: false,
 timer: 5000
});
</script>
{%endif%}
{%endfor%}

{% for message in messages %}

 {% if message.tags == 'info' %}

<script type="text/javascript">
 Swal.fire({
 position: "top-end",
 icon: "info",
 title: "{{message}}",
 showConfirmButton: false,
 timer: 5000
});
</script>
{%endif%}
{%endfor%}

<script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>
<script>
    new TomSelect("#prestatires",{
	persist: false,
	createOnBlur: true,
	create: true
});
</script>
<script>
  new TomSelect("#operation",{
persist: false,
createOnBlur: true,
create: true
});
</script>
<script>
  new TomSelect("#tva",{
persist: false,
createOnBlur: true,
create: true
});
</script>
<script>
  new TomSelect("#ir",{
persist: false,
createOnBlur: true,
create: true
});
</script>

<script>
  new TomSelect("#institution",{
persist: false,
createOnBlur: true,
create: true
});
</script>
<script>
  new TomSelect("#prestataire",{
persist: false,
createOnBlur: true,
create: true
});
</script>
<script>  
  $(document).ready(function() {  
    $('#operation').on('change', function() {  
        var selectedId = $(this).val();  
    
        $.ajax({  
            url: '/search_operations/',  
            method: 'GET',  
            data: { id: selectedId },  
            success: function(data) {  
                var selectSousProgramme = $('#sous_programme');  
                var selectActivite = $('#activite');  
                var selectTache = $('#tache');  
              
                console.log('Données récupérées:', data); // Afficher les données dans la console  
                selectSousProgramme.empty(); // Effacer les anciennes options  
                selectActivite.empty(); // Effacer les anciennes options  
                selectTache.empty(); // Effacer les anciennes options  
                
                // Ajouter une option par défaut pour chaque sélection  
                
                // Ajouter les nouvelles options pour les sous-programmes  
                data.forEach(function(sous_programme) {  
                    selectSousProgramme.append($('<option>', {  
                        value: sous_programme.idsousprogramme,  
                        text: sous_programme.sousprogramme_nom  
                    }));  

                    // Ajouter les options pour les noms d'activités et de tâches  
                    selectActivite.append($('<option>', {  
                        value: sous_programme.idactivite,  
                        text: sous_programme.activite_nom // Utiliser le nom de l'activité  
                    }));  

                    selectTache.append($('<option>', {  
                        value: sous_programme.idtache,  
                        text: sous_programme.tache_nom // Utiliser le nom de la tâche  
                    }));  
                    
                });  
            },  
            error: function(xhr, status, error) {  
                console.error('Une erreur s\'est produite lors de la requête AJAX :', status, error);  
            }  
        });  
    });  
});  
</script>
<script>
  // Lorsque l'utilisateur clique sur un onglet
document.querySelectorAll('.nav-link').forEach(button => {
    button.addEventListener('click', function() {
        // Enregistrer l'onglet actif dans le stockage local
        localStorage.setItem('activeTab', this.id);
    });
});

// Lors du chargement de la page, vérifier si un onglet actif est enregistré
window.addEventListener('DOMContentLoaded', (event) => {
    const activeTab = localStorage.getItem('activeTab');
    if (activeTab) {
        // Activer l'onglet enregistré
        const tabToActivate = document.getElementById(activeTab);
        if (tabToActivate) {
            tabToActivate.click();
        }
    }
});

</script>
{%endblock%}